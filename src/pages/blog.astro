---
import BlogLayout from "../layouts/BlogLayout.astro";
import MotionCard from "../components/Shared/MotionCard.jsx";

import "../../styles/global.css";

// Load MDX posts
const postImports = import.meta.glob("../posts/*.mdx", { eager: true });
const posts = Object.values(postImports)
    .map((p: any) => ({
        title: p.frontmatter.title,
        date: p.frontmatter.date,
        excerpt: p.frontmatter.excerpt,
        url: p.url,
    }))
    .sort((a, b) => new Date(b.date) - new Date(a.date));
---

<BlogLayout>
    <h2 class="text-4xl font-bold mb-6">Blog</h2>
    <div class="space-y-10">
        {
            posts.map((post, i) => (
                <MotionCard delay={i * 0.15}>
                    <article class="border-b border-gray-200 dark:border-gray-800 pb-6 rounded-lg hover:shadow-lg transition-shadow duration-300">
                        <h3 class="text-2xl font-semibold mb-2">
                            <a
                                href={post.url}
                                class="hover:text-blue-500 transition"
                            >
                                {post.title}
                            </a>
                        </h3>
                        <time class="text-sm text-gray-500">{post.date}</time>
                        <p class="mt-2 text-gray-700 dark:text-gray-300">
                            {post.excerpt}
                        </p>
                    </article>
                </MotionCard>
            ))
        }
    </div>
</BlogLayout>
